<div th:fragment="codeFragment(code)">
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/posts/post.css" />
    <link rel="stylesheet" href="/prism/prism.css">
    <div>
        <h2 class ="title" th:text="${code.title()}"></h2>
        <div class ="author">
            <p>from: </p>
            <a th:href="'/users/' + ${code.userInformation().username()}" th:text="${code.userInformation().username()}"></a>
        </div>
        <p class="date right post-date" th:text="${code.date()}"></p>
    </div>
    <div class ="post">
        <div class ="resize">
            <div class ="buttons">
                <div class ="votes">
                    <form name="vote" id="vote" th:data-code-id="${code.id()}">
                        <button class="btn vote-btn upvote-btn" type="button" name="voteType" value="UpVote">â–²</button>
                        <p class="vote-score" th:text="${code.score()}"></p>
                        <button class="btn vote-btn downvote-btn" type="button" name="voteType" value="DownVote">â–¼</button>
                    </form>
                </div>
                <form th:if="${auth != null && auth.isAdmin()}" name="delete" id="delete" th:data-code-id="${code.id()}">
                    <button class="btn delete-btn" type="button" name="voteType" value="UpVote">ðŸ—‘</button>
                </form>
            </div>
            <div class ="content">
                <p class="description" th:text="${code.description()}"></p>
                <pre><code id="codeBlock" class="language-java java-code" th:data-code="${code.javaContent()}"></code></pre>
                <pre th:if="${code.unitContent() != null}"><code class="language-java" th:text="${code.unitContent()}"></code></pre>
                <div th:if="${code.unitContent() != null}">
                    <p th:text="'Total: ' + ${code.testResultsInformation.testsTotalCount}"> </p>
                    <p th:text="'Success: ' + ${code.testResultsInformation.testsSucceededCount}"></p>
                    <p th:text="'Failed: ' + ${code.testResultsInformation. testsFailedCount}"></p>
                    <p th:text="'Time: ' + ${code.testResultsInformation.testsTotalTime}"></p>
                    <p th:if="${code.testResultsInformation.failures != ''}" >Failures :</p>
                    <pre th:if="${code.testResultsInformation.failures != ''}"><code id="codeBlock" class="failure language-java java-code" th:data-code="${code.testResultsInformation.failures}"></code></pre>
                </div>

            </div>
        </div>
    </div>
    <script src="/script/delete.js"></script>
    <script>
        del('/api/v1/codes/', 'data-code-id', 'Code deleted.', back)
    </script>
</div>